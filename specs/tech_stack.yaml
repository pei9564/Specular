# 技術堆疊配置
# 用於指定 automation 階段的實作技術棧

# 前端框架與工具
frontend:
  language: TypeScript
  # framework: Next.js 14 (App Router) # 舊版本：Next.js 全端框架
  framework: React + Vite              # 新版本：依據規格書 2.1，採用輕量化 SPA 架構，構建速度快且適合純前端分離開發
  
  # role: Frontend + BFF (Backend for Frontend) # 舊版本：包含 BFF 層
  role: Single Page Application (SPA)  # 新版本：純前端應用，直接與 Python FastAPI 後端溝通
  
  ui_library: React 18
  
  # styling: Tailwind CSS # 舊版本：Tailwind CSS
  styling: Vanilla CSS  # 新版本：依據開發規範建議，使用原生 CSS 以獲得最大設計彈性與控制力 (System Prompt 建議)
  
  state_management: React Hooks (useState, useContext)
  http_client: fetch API (內建)
  form_handling: 原生 HTML Forms
  
  # api_proxy: Next.js API Routes (處理 CORS 跨域轉發) # 舊版本：Next.js API Routes
  api_proxy: Vite Proxy / Nginx        # 新版本：開發環境使用 Vite Proxy，生產環境使用 Nginx 反向代理

# 後端框架與工具
backend:
  language: Python
  framework: FastAPI
  runtime: Uvicorn (ASGI Server)
  validation: Pydantic v2

# Agent 框架與 LLM 整合 (大幅調整)
# llm_integration:
#   framework: LangChain (Python)
#   core_modules: 
#     - langchain-openai (用於 OpenAI Compatible 介面)
#     - langchain-community (用於特殊工具整合)
#     - langgraph (用於 Stateful Agent 流程控制)
#   interface_standard: OpenAI Compatible API (/v1/chat/completions)
agent_framework:
  framework: AgentScope                # 新版本：依據規格書 2.1，改用 AgentScope 作為多 Agent 協作核心框架
  role: Agent Orchestration & Runtime  # 負責 Agent 的生命週期管理與訊息傳遞
  features:
    - Multi-Agent Collaboration
    - Distributed Runtime
  
model_integration:
  provider_management: 自研 Model Manager # 依據規格書 3.9，支援 OpenAI, Anthropic, DashScope, Azure, Custom
  interface_standard: OpenAI Compatible / Provider SDKs
  
# 資料庫
database:
  # type: PostgreSQL 15 # 舊版本：僅關聯式資料庫
  relational: PostgreSQL 15            # 依據規格書 2.1 & 4.1，儲存使用者、設定、對話紀錄
  
  vector: Milvus                       # 新版本：依據規格書 2.1，新增向量資料庫用於 RAG
  
  queue_cache: Redis                   # 新版本：依據規格書 2.1，新增 Redis 用於訊息佇列與快取
  
  client: AsyncPG / SQLModel / SQLAlchemy
  migration: Alembic / SQLModel        # 建議加入 Alembic 進行遷移管理

# 容器化與編排
containerization:
  app: Docker
  # orchestration: Docker Compose # 舊版本：僅 Docker Compose
  orchestration: Docker Compose + Kubernetes # 新版本：依據規格書 2.1，開發環境用 Compose，生產環境支援 K8s
  base_image: python:3.11-slim (Backend), node:18-alpine (Frontend)

# 開發工具
dev_tools:
  package_manager: npm (Frontend), pip/poetry (Backend)
  linter: ESLint (Frontend), Ruff (Backend)
  formatter: Prettier (Frontend), Black (Backend)

# E2E 測試
testing:
  e2e_framework: Playwright
  bdd_parser: playwright-bdd
  feature_language: 中文 (zh-TW)
